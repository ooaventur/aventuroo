<!doctype html>
<html lang="en"><head>
<meta charset="utf-8">
<title>AventurOO • Stories</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/styles.css">
</head><body>
<div id="site-header"></div>
<div class="ad-box text-center py-3"><div class="container"><div class="py-3">[728×90 Banner Ad Placeholder]</div></div></div>
<section class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div><h1 class="fw-bold">Stories</h1><p class="text-muted">Latest stories in stories.</p></div>
    <div class="d-flex align-items-center gap-2">
      <span class="text-muted small">Sort</span>
      <select id="sort" class="form-select form-select-sm" style="width:auto" onchange="render()">
        <option value="new">Newest</option>
        <option value="old">Oldest</option>
        <option value="title">Title A–Z</option>
      </select>
    </div>
  </div>
  <div class="row g-4">
    <div class="col-lg-8">
      <div id="list" class="row g-4"></div>
      <div class="d-flex align-items-center justify-content-between mt-4">
        <button id="prevBtn" class="btn btn-outline-secondary btn-sm" onclick="prevPage()">← Previous</button>
        <div id="pageInfo" class="small text-muted"></div>
        <button id="nextBtn" class="btn btn-outline-secondary btn-sm" onclick="nextPage()">Next →</button>
      </div>
    </div>
    <aside class="col-lg-4 sidebar">
      <div class="ad-box rounded-3 d-flex align-items-center justify-content-center mb-3" style="height:250px;">[300×250 Ad]</div>
      <div class="card shadow-sm mb-3"><div class="card-body"><h6 class="card-title mb-3">Popular</h6><ul id="popular" class="list-unstyled small mb-0"></ul></div></div>
      <div class="ad-box rounded-3 d-flex align-items-center justify-content-center" style="height:600px;">[300×600 Skyscraper Ad]</div>
    </aside>
  </div>
</section>
<div id="site-footer"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/site.js"></script>
<script>
renderHeader('Stories'); renderFooter();
let all=[]; let perPage=6; let page=1;
function sortPosts(arr,how){ if(how==='title')return arr.sort((a,b)=>a.title.localeCompare(b.title)); if(how==='old')return arr.sort((a,b)=>(a.date||'').localeCompare(b.date||'')); return arr.sort((a,b)=>(b.date||'').localeCompare(a.date||'')); }
function filtered(){ const s=document.getElementById('sort').value; return sortPosts(all.filter(p=>p.category.toLowerCase()==='stories'), s); }
function render(){ const posts=filtered(); const total=Math.max(1,Math.ceil(posts.length/perPage)); page=Math.min(page,total); const slice=posts.slice((page-1)*perPage,(page-1)*perPage+perPage);
  document.getElementById('list').innerHTML=slice.map(p=>`
  <div class="col-sm-6"><article class="card border-0 shadow-sm h-100">
    <a href="article.html?slug=${p.slug}"><img src="${p.cover}" class="card-img-top" alt="${p.title}"></a>
    <div class="card-body d-flex flex-column">
      <div class="small text-uppercase text-muted">${p.category}</div>
      <h5 class="card-title mt-1"><a href="article.html?slug=${p.slug}" class="link-dark text-decoration-none">${p.title}</a></h5>
      <p class="card-text text-muted line-clamp-3">${p.excerpt}</p>
      <div class="mt-auto d-flex justify-content-between small text-muted"><span>${p.date}</span><a href="article.html?slug=${p.slug}" class="link-primary">Read →</a></div>
    </div>
  </article></div>`).join('');
  document.getElementById('pageInfo').textContent=`Page ${page} of ${total}`;
  document.getElementById('prevBtn').disabled=page<=1; document.getElementById('nextBtn').disabled=page>=total;
}
function prevPage(){ if(page>1){ page--; render(); } }
function nextPage(){ page++; render(); }
async function load(){ const r=await fetch('data/posts.json'); all=r.ok?await r.json():[]; render(); document.getElementById('popular').innerHTML=all.slice(0,5).map(p=>`<li class='mb-2'><a class='link-secondary text-decoration-none' href="article.html?slug=${p.slug}">${p.title}</a><div class='text-muted'>${p.date}</div></li>`).join('') }
load();
</script>
</body></html>
